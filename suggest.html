<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title> Contact — Matcha in Paris</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Page-scoped polish (won't affect other pages) */
    .btn-primary {
      background: var(--accent, #274e13);
      color: #fff;
      border: 1px solid var(--accent, #274e13);
    }
    .btn-primary:hover { filter: brightness(0.95); }
    .hint { font-size: 12px; color: var(--muted, #6b7280); }
    .center { text-align: center; }
    /* make the segmented topics pop a bit more */
    .seg-group label[data-color="green"].active  { background:#e6f4ea; border-color:#a8c3ab; color:#234d33; }
    .seg-group label[data-color="teal"].active   { background:#e6f3f2; border-color:#9ad1c8; color:#1f4e4a; }
    .seg-group label[data-color="amber"].active  { background:#fff7e6; border-color:#f3d197; color:#6b4b16; }
  </style>
</head>
<body>
  <header class="header-bar">
    <nav class="navbar">
      <a href="index.html">About</a>
      <a href="spots.html">Spots</a>
      <a class="active" href="suggest.html">Contacts</a>
    </nav>
  </header>

  <!-- Handwritten logo -->
  <div class="logo-hero">
    <img src="assets/logo.png" alt="Matcha in Paris" class="site-logo">
  </div>

  <div class="container">
    <p class="text-muted center">Know a spot, found a bug, or want to collaborate? Tell me below ☕️</p>

    <div class="card card-xl">
      <!-- Formspree backend -->
      <form action="https://formspree.io/f/mpwlgdyb" method="POST">
        <!-- Topic first -->
        <div>
          <strong>Topic</strong>
          <div class="seg-group" role="radiogroup" aria-label="Topic">
            <input id="t-spot" type="radio" name="topic" value="submit-spot" checked>
            <label for="t-spot" data-color="green">Submit a spot</label>

            <input id="t-bug" type="radio" name="topic" value="bug">
            <label for="t-bug" data-color="teal">Bug / improvement</label>

            <input id="t-collab" type="radio" name="topic" value="collab">
            <label for="t-collab" data-color="amber">Business collaboration</label>
          </div>
        </div>

        <!-- Email only (optional unless business/newsletter) -->
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:14px">
          <label style="flex:1 1 320px">Email
            <input class="form-input" type="email" name="from_email" id="emailField" placeholder="you@example.com">
            <div class="hint" id="emailHint">(optional — Required for business or newsletter)</div>
          </label>
        </div>

        <!-- Spot-only fields -->
        <div id="spotFields" style="margin-top:12px">
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <label style="flex:1 1 260px">Place name
              <input class="form-input" name="place_name" id="placeName">
            </label>
            <label style="flex:2 1 320px">Address
              <input class="form-input" name="place_address" id="placeAddress">
            </label>
          </div>
          <label style="display:block;margin-top:8px">Google Maps link (optional)
            <input class="form-input" name="gmap_url" placeholder="https://maps.google.com/...">
          </label>
        </div>

        <!-- Message -->
        <label style="display:block;margin-top:12px">Message / details
          <textarea class="form-textarea" name="message" rows="6" placeholder="Tell me what’s useful for readers…"></textarea>
        </label>

        <!-- Newsletter opt-in -->
        <div style="display:flex;gap:12px;align-items:center;margin-top:12px">
          <label style="display:flex;align-items:center;gap:6px;font-size:14px;">
            <input type="checkbox" id="newsletterOpt" name="newsletter_optin" value="yes">
            Also subscribe to my weekly tip
          </label>
        </div>

        <!-- Submit -->
        <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn btn-primary" type="submit" id="sendBtn">Send</button>
        </div>

        <!-- Formspree metadata -->
        <input type="hidden" name="_subject" value="New message from matchainparis.com">
        <input type="text" name="_gotcha" style="display:none"> <!-- spam honeypot -->
      </form>
    </div>
  </div>

  <footer>© <span id="year"></span> matchainparis.com • Built with ❤️ in Paris, by Ellina K-A</footer>

  <script>
    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Elements
    const topicRadios   = Array.from(document.querySelectorAll('input[name="topic"]'));
    const labels        = Array.from(document.querySelectorAll('.seg-group label'));
    const spotFields    = document.getElementById('spotFields');
    const placeName     = document.getElementById('placeName');
    const placeAddress  = document.getElementById('placeAddress');
    const emailField    = document.getElementById('emailField');
    const emailHint     = document.getElementById('emailHint');
    const newsletterOpt = document.getElementById('newsletterOpt');
    const sendBtn       = document.getElementById('sendBtn');

    function currentTopic(){
      const r = topicRadios.find(r => r.checked);
      return r ? r.value : 'submit-spot';
    }

    function updateActiveChips(){
      labels.forEach(l => {
        const forId = l.getAttribute('for');
        const input = document.getElementById(forId);
        l.classList.toggle('active', !!input?.checked);
      });
    }

    function updateVisibilityAndRequirements(){
      // Spot-only section
      const isSpot = currentTopic() === 'submit-spot';
      spotFields.style.display = isSpot ? 'block' : 'none';
      placeName.required = isSpot;
      placeAddress.required = isSpot;

      // Email becomes required for business OR newsletter
      const mustHaveEmail = (currentTopic() === 'collab') || newsletterOpt.checked;
      emailField.required = mustHaveEmail;
      emailHint.textContent = mustHaveEmail
        ? '(Required for business or newsletter)'
        : '(optional — Required for business or newsletter)';
    }

    // Wire events
    topicRadios.forEach(r => r.addEventListener('change', () => {
      updateActiveChips();
      updateVisibilityAndRequirements();
    }));
    newsletterOpt.addEventListener('change', updateVisibilityAndRequirements);

    // Initial
    updateActiveChips();
    updateVisibilityAndRequirements();

    // Optional: simple "Sending…" state
    document.querySelector('form')?.addEventListener('submit', () => {
      sendBtn.disabled = true;
      sendBtn.textContent = 'Sending…';
    });
  </script>
</body>
</html>
